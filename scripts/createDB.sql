CREATE TABLE IF NOT EXISTS PATIENT
(
  PATIENTID  BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
  LASTNAME   VARCHAR(30) NOT NULL,
  FIRSTNAME  VARCHAR(30) NOT NULL,
  MIDDLENAME VARCHAR(30),
  PHONE      VARCHAR(20) NOT NULL
);

CREATE TABLE IF NOT EXISTS DOCTOR
(
    DOCTORID   BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
    LASTNAME   VARCHAR(30) NOT NULL,
    FIRSTNAME  VARCHAR(30) NOT NULL,
    MIDDLENAME VARCHAR(30),
    SPEC       VARCHAR(150) NOT NULL
);

CREATE TABLE IF NOT EXISTS RECIPE
(
    DOCTORID     BIGINT NOT NULL FOREIGN KEY REFERENCES DOCTOR (DOCTORID) ON DELETE CASCADE ON UPDATE CASCADE,
    PATIENTID    BIGINT NOT NULL FOREIGN KEY REFERENCES PATIENT (PATIENTID) ON DELETE CASCADE ON UPDATE CASCADE,
    DESC         VARCHAR(30) NOT NULL,
    CREATIONDATE DATE DEFAULT CURRENT_DATE NOT NULL,
    VALIDITY     INT NOT NULL,
    PRIORITY     VARCHAR(30) NOT NULL CHECK (PRIORITY='Normal' or PRIORITY='Cito' or PRIORITY='Statim'),
    PRIMARY KEY (DOCTORID, PATIENTID)
);